# CoMarkdown

## 一、小组成员

- 1552631 郭绍棠
- 1552632 陈湃轩
- 1552677 邬欣颖

## 二、项目简述

Android端Markdown文档协同编辑工具。主要功能点：

- Markdown即时编辑与渲染
- 协同编辑
- 上传与下载
- 登陆与注册
- 基本的文件系统

## 三、用例图



## 四、用例描述

### 注册

| 名称   | 注册                                       |
| :--- | ---------------------------------------- |
| 简述   | 用户注册账号，并在服务端持久化保存。                       |
| 参与者  | 游客（潜在用户）                                 |
| 前置条件 | 游客进入应用（区别于用户应用）                          |
| 后置条件 | 服务端保存注册信息                                |
| 基本路径 | 1.用户申请注册<br />2.跳转到注册界面<br />3.用户填写注册信息<br />4.检查输入信息是否合法<br />5.服务端保存注册信息<br />6.提示“注册完成”，跳转回登陆界面 |
| 可选路径 | 4.a.1.用户输入信息不合法<br />  4.a.2.提示“输入信息不合法”，跳转到注册界面 |
| 补充说明 | 注册信息包括账号，密码（保存hash值）和邮箱地址。               |

### 登陆

| 名称   | 登陆                                       |
| :--- | ---------------------------------------- |
| 简述   | 用户登录，进行token验证并本地保存登录信息。                 |
| 参与者  | 用户                                       |
| 前置条件 | 用户进入应用（区别于游客）                            |
| 后置条件 | 本地保存登录信息                                 |
| 基本路径 | 1.用户登录<br />2.跳转到登录界面<br />3.用户填写账号密码<br />4.服务端验证登录信息<br />5.本地保存登录信息<br />6.跳转回Home界面 |
| 可选路径 | 4.a.1.验证失败<br />  4.a.2.提示账号或者密码错误（或者网络异常） |
| 补充说明 |                                          |

### Markdown编辑

| 名称   | Markdown编辑                               |
| :--- | ---------------------------------------- |
| 简述   | 用户可新建，删除或者编辑markown文档。                   |
| 参与者  | 用户                                       |
| 前置条件 | 用户已登录，并已选择文档。                            |
| 后置条件 | 本地保存md文档。                                |
| 基本路径 | 1.选择Markdown文件<br />2.进入文档编辑界面<br />3.用户进行增删改<br />4.保存增删改信息（便于undo和redo）<br />5.保存 |
| 可选路径 | 4.a.用户选择undo操作<br />4.b.用户选择redo操作       |
| 补充说明 |                                          |

### 新建文件

| 名称   | 新建文件                                     |
| ---- | :--------------------------------------- |
| 简述   | 用户添加新文件，并在服务端进行保存                        |
| 参与者  | 用户                                       |
| 前置条件 | 用户登录应用                                   |
| 后置条件 | 服务端保存文件信息                                |
| 基本路径 | 1.用户申请添加新文件<br />2. 转到新建文件页面<br />3.用户填写文件信息<br />4.检查文件信息是否合法，是否重复<br />5.服务端保存<br />6.提示“文件创建成功”，跳转到创建的新文件 |
| 可选路径 | 4.a1用户输入信息不合法<br />   a2提示“用户输入信息不合法”跳转到新建文件页面 <br />   a3提示“属性不能为空”，填写为默认属性<br />b提示“用户创建文件名重复”，要求用户重新输入文件名 |
| 补充说明 |                                          |

### 删除文件

| 名称   | 删除文件                                     |
| ---- | ---------------------------------------- |
| 简述   | 用户删除文件，并在服务端记录                           |
| 参与者  | 用户                                       |
| 前置条件 | 用户登录应用，选择文件                              |
| 后置条件 | 服务端删除文件                                  |
| 基本路径 | 1.用户申请删除<br />2.跳出确认框（确认和取消）<br />3.确认<br />4.检查文件是否存在<br />5.服务端删除文件<br />6。提示“文件删除成功”，跳转到文件界面 |
| 可选路径 | 4a提示“该文件不存在”                             |
| 补充说明 |                                          |

### 修改文件

| 名称   | 修改文件                                     |
| ---- | ---------------------------------------- |
| 简述   | 用户修改文件                                   |
| 参与者  | 用户                                       |
| 前置条件 | 用户登录应用，选择文件                              |
| 后置条件 | 服务端保存文件信息                                |
| 基本路径 | 1.用户申请修改文件<br />2.跳出文件属性框<br />3.修改文件的属性<br />4检查修改文件的属性是否合法<br />5服务端保存<br />6.提示“修改文件成功”，跳转到文件界面 |
| 可选路径 | 4a1提示“属性不合法”，还原为原来的属性 <br />a2提示“该文件已存在”（名字重复），还原原来的名字 <br />a3提示“属性不能为空”，还原为原来的属性 |
| 补充说明 | 可修改属性：文件名，文件类型等                          |

### 查找文件

| 名称   | 查找文件                                     |
| ---- | ---------------------------------------- |
| 简述   | 用户在文件界面查找具体文件                            |
| 参与者  | 用户                                       |
| 前置条件 | 用户登录应用                                   |
| 后置条件 | 服务端返回文件                                  |
| 基本路径 | 1.用户申请查找文件<br />2.用户输入文件名<br />3.开始查找文件<br />4.反馈 |
| 可选路径 | 4a1找到文件，跳转到文件所在<br />a2 找到文件，直接打开文件<br />b反馈“未找到文件”，跳转到文件页面 |
| 补充说明 |                                          |

### 上传文件

| 名称   | 上传文件                                     |
| :--- | :--------------------------------------- |
| 简述   | 用户上传文件，并在服务器端保存。                         |
| 参与者  | 用户                                       |
| 前置条件 | 用户进入应用，网络连接正常。                           |
| 后置条件 | 服务器端保存文件及版本号。                            |
| 基本路径 | 1.用户本地保存文件<br>2.文件与最新版本文件做diff<br>3.修改服务器端文件并更新版本<br>4.上传成功 |
| 可选路径 | 3.a 连接服务器失败                              |
| 补充说明 | 上传文件会更新版本号以及patch到其他客户端。                 |

### 下载文件

| 名称   | 下载文件                                     |
| :--- | :--------------------------------------- |
| 简述   | 用户下载文件，并在本地保存。                           |
| 参与者  | 用户                                       |
| 前置条件 | 用户进入应用，网络连接正常。                           |
| 后置条件 | 本地保存文件。                                  |
| 基本路径 | 1.用户发送请求<br>2.下载最新版本文件<br>3.保存最新版本文件<br>4.保存成功 |
| 可选路径 | 2.a 连接服务器失败                              |
| 补充说明 |                                          |

### 协同编辑

| 名称   | 协同编辑                                     |
| :--- | :--------------------------------------- |
| 简述   | 多人在线编辑。                                  |
| 参与者  | 多名用户                                     |
| 前置条件 | 用户进入应用，网络连接正常                            |
| 后置条件 | 服务端文件版本更新                                |
| 基本路径 | 1.用户编辑文件<br>2.下载最新版本文件<br>3.与最新版本文件做differ<br>4.发送differ<br>5.服务端patch最新文件<br>6.回到操作1 。 |
| 可选路径 | 2.a 连接服务器失败                              |
| 补充说明 | 本地多refresh可以看到别人更改后的文件。                  |

